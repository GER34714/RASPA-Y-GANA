<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>FACU CASINO™ - Raspadita</title>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <style>
    body {
      margin:0;
      font-family: 'Segoe UI', Arial, sans-serif;
      background:#0d1222;
      color:#fff;
      text-align:center;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      height:100vh;
    }
    h1{margin-bottom:10px;color:#ffd700;text-shadow:0 0 10px #ff0080;}
    #scratch-container {position:relative;display:inline-block;}
    canvas {
      position:absolute;
      top:0;
      left:0;
      cursor:crosshair;
    }
    .premio {
      background:#111;
      padding:30px;
      border-radius:20px;
      border:2px solid #ffd700;
      font-size:1.4rem;
      min-width:300px;
      transition:transform 0.2s ease;
    }
    .shake {
      animation: shake 0.5s;
    }
    @keyframes shake {
      0% { transform: translate(0px, 0px) rotate(0deg); }
      20% { transform: translate(-5px, 0px) rotate(-2deg); }
      40% { transform: translate(5px, 0px) rotate(2deg); }
      60% { transform: translate(-5px, 0px) rotate(-2deg); }
      80% { transform: translate(5px, 0px) rotate(2deg); }
      100% { transform: translate(0px, 0px) rotate(0deg); }
    }
    .botones {margin-top:20px;}
    button {
      background:#25d366;
      border:none;
      padding:12px 20px;
      border-radius:12px;
      color:#fff;
      font-weight:bold;
      cursor:pointer;
      margin:5px;
      font-size:1rem;
    }
    button.reiniciar {background:#ff4757;}
    .aviso{margin-top:20px;font-size:0.9rem;color:#aaa;}
  </style>
</head>
<body>
  <h1>FACU CASINO™ 🎉</h1>
  <div id="scratch-container">
    <div class="premio" id="premioTexto">
      Raspá para revelar tu premio ✨
    </div>
    <canvas id="scratch"></canvas>
  </div>

  <div class="botones">
    <button onclick="abrirWhatsApp()">Reclamar por WhatsApp</button>
    <button class="reiniciar" onclick="reiniciar()">Reiniciar</button>
  </div>

  <div class="aviso">+18 • Jugá con responsabilidad</div>

  <script>
    const canvas=document.getElementById("scratch");
    const ctx=canvas.getContext("2d");
    const premioTexto=document.getElementById("premioTexto");

    // Premios que sí pueden salir
    const premiosDisponibles=[
      "🎁 15% más de fichas",
      "🎁 20% más de fichas",
      "🙃 ¡Probá de nuevo!"
    ];

    // Premio reservado (no entra en random)
    const premioReservado="💰 10.000 en transferencia";

    function lanzarConfetti(){
      confetti({
        particleCount:120,
        spread:70,
        origin:{y:0.6},
        colors:["#ffd700","#ffffff","#ff0080","#00ff99"]
      });
    }

    function nuevoPremio(){
      const premio=premiosDisponibles[Math.floor(Math.random()*premiosDisponibles.length)];
      premioTexto.innerHTML=premio;

      // efectos según premio
      if(premio.includes("15%") || premio.includes("20%")){
        setTimeout(()=>lanzarConfetti(),300); 
      }
      if(premio.includes("Probá de nuevo")){
        premioTexto.classList.add("shake");
        setTimeout(()=>premioTexto.classList.remove("shake"),600);
      }
    }

    function resize(){
      canvas.width=premioTexto.offsetWidth;
      canvas.height=premioTexto.offsetHeight;
      ctx.fillStyle="#888"; // color gris de la raspadita
      ctx.fillRect(0,0,canvas.width,canvas.height);
      ctx.fillStyle="rgba(0,0,0,1)";
      ctx.globalCompositeOperation="destination-out";
    }
    function reiniciar(){ nuevoPremio(); resize(); }

    function pos(e){
      const r=canvas.getBoundingClientRect();
      if(e.touches) return {x:e.touches[0].clientX-r.left,y:e.touches[0].clientY-r.top};
      return {x:e.clientX-r.left,y:e.clientY-r.top};
    }
    function draw(x,y){
      ctx.beginPath();
      ctx.arc(x,y,20,0,Math.PI*2);
      ctx.fill();
    }

    let drawing=false;
    canvas.addEventListener("mousedown",e=>{drawing=true;draw(...Object.values(pos(e)));});
    canvas.addEventListener("mousemove",e=>{if(drawing)draw(...Object.values(pos(e)));});
    window.addEventListener("mouseup",()=>drawing=false);
    canvas.addEventListener("touchstart",e=>{drawing=true;draw(...Object.values(pos(e)));});
    canvas.addEventListener("touchmove",e=>{if(drawing)draw(...Object.values(pos(e)));});
    canvas.addEventListener("touchend",()=>drawing=false);

    function abrirWhatsApp(){
      const url="https://wa.me/5491125127839?text=¡Hola! Quiero reclamar mi premio 🎉";
      window.open(url,"_blank");
    }

    // Inicial
    nuevoPremio();
    resize();
    window.addEventListener("resize",resize);
  </script>
</body>
</html>
